<!DOCTYPE html>
<html lang="pt-BR">
<head>

  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Smart Lib</title>

  <link rel="stylesheet" href="styles.css" />
</head>

<script>
  // Se n√£o houver sess√£o, vai pro login
  if (!localStorage.getItem("smartlib_usuario")) {
    window.location.replace("login.html");
  }
</script>

<body>
  <div id="mensagem-aviso" style="text-align:center; background:#ffe0e0; color:#b00020; padding:12px; display:none;"></div>


  <!-- Header -->
  <header class="topo">
    <div class="logo-container">
      <h1 class="logo-text">üìö SmartLib</h1>
    </div>

    <nav>
      <ul class="nav-links">
        <li><a href="index.html">In√≠cio</a></li>
        <li><a href="catalogo.html">Cat√°logo</a></li>
        <li><a href="funcionario.html">Sou Funcion√°rio</a></li>
        <li><a href="cadastro-livros.html">Cadastrar Livros</a></li>
      </ul>
    </nav>

    <div class="user-info" id="user-info">
      <!-- Preenchido via JS -->
    </div>
  </header>

  <!-- Banner -->
  <section class="banner">
    <div class="banner-content">
      <h1 id="typing"></h1>
      <p>Conecte-se √† nossa comunidade liter√°ria</p>
      <button onclick="location.href='catalogo.html'">Explore o Cat√°logo</button>
    </div>
  </section>

  <section class="destaques">
    <h2>Na SmartLib voc√™ pode:</h2>
    <div class="icones-servicos">
      <div class="card">
        <img src="assets/icon-book.png" alt="Livros" />
        <p>Consultar mais de 5.000 t√≠tulos</p>
      </div>
      <div class="card">
        <img src="assets/icon-lend.png" alt="Empr√©stimos" />
        <p>Reservar e renovar online</p>
      </div>
      <div class="card">
        <img src="assets/icon-digital.png" alt="Ebooks" />
        <p>Ler e-books direto no navegador</p>
      </div>
    </div>
  </section>


  <section class="destaques">
  <h2>Livros Populares</h2>
  <div class="livros-grid">
    <!-- Primeira c√≥pia dos livros -->
    <div class="livro" data-genero="ficcao_cientifica" data-status="disponivel">
      <img src="assets/1984 - George Orwell.png" alt="Capa do livro 1984" />
      <p class="titulo">1984</p>
      <p class="autor">George Orwell</p>
    </div>
    
    <div class="livro" data-genero="ficcao_cientifica" data-status="disponivel">
      <img src="assets/A Cantiga dos Passaros e das Serpentes  - Suzanne Collins.png" alt="A Cantiga dos Passaros e das Serpentes" />
      <p class="titulo">A Cantiga dos P√°ssaros e das Serpentes</p>
      <p class="autor">Suzanne Collins</p>
    </div>
    
    <div class="livro" data-genero="romance" data-status="disponivel">
      <img src="assets/A Cinco passo de Voc√™ - Rachael Lippincott.png" alt="A Cinco Passos de Voc√™" />
      <p class="titulo">A Cinco Passos de Voc√™</p>
      <p class="autor">Rachael Lippincott</p>
    </div>
  
    <div class="livro" data-genero="romance" data-status="disponivel">
      <img src="assets/A Culpa √© das Estrelhas - John Green.png" alt="A Culpa √© das Estrelas" />
      <p class="titulo">A Culpa √© das Estrelas</p>
      <p class="autor">John Green</p>
    </div>
    
    <div class="livro" data-genero="fantasia" data-status="disponivel">
      <img src="assets/A Vida Inv√≠sivel de Addie Larue - V. E. Schwab.png" alt="A Vida Invis√≠vel de Addie Larue" />
      <p class="titulo">A Vida Invis√≠vel de Addie LaRue</p>
      <p class="autor">V. E. Schwab</p>
    </div>
    
    <div class="livro" data-genero="ciencia" data-status="disponivel">
      <img src="assets/Breves Respostas para Grandes Quest√µes - Stephen Hawking.png" alt="Breves Respostas para Grandes Quest√µes" />
      <p class="titulo">Breves Respostas para Grandes Quest√µes</p>
      <p class="autor">Stephen Hawking</p>
    </div>      
  </section>

  <section class="novidades-semana">
    <h2>Novidades da Semana</h2>
    <div class="carrossel">
      <div class="livro-card"><img src="assets/A%20Vida%20Inv√≠sivel%20de%20Addie%20Larue%20-%20V.%20E.%20Schwab.png" alt="Livro novo 1"><p>A Vida Inv√≠sivel de Addie Larue</p></div>
      <div class="livro-card"><img src="assets/Breves%20Respostas%20para%20Grandes%20Quest√µes%20-%20Stephen%20Hawking.png" alt="Livro novo 2"><p>Breves Respostas para Grandes Quest√µes</p></div>
      <div class="livro-card"><img src="assets/A%20Cinco%20passo%20de%20Voc√™%20-%20Rachael%20Lippincott.png" alt="Livro novo 3"><p>A Cinco Passos de Voc√™</p></div>
    </div>
  </section>

  <section class="recomendacoes">
    <h2>Leitores recomendam</h2>
    <div class="depoimentos">
      <div class="depoimento">
        <p>"Sistema muito intuitivo, achei todos os livros que precisava!"</p>
        <span>‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</span><br>
        <small>‚Äî Ana P., estudante</small>
      </div>
      <div class="depoimento">
        <p>"A biblioteca online me salvou nas leituras obrigat√≥rias da faculdade."</p>
        <span>‚≠ê‚≠ê‚≠ê‚≠ê</span><br>
        <small>‚Äî Jo√£o M., universit√°rio</small>
      </div>
    </div>
  </section>

<!-- Se√ß√£o de Novidades (Substituindo Eventos por algo mais relevante) -->
<section class="novidades">
  <h2>Novidades e Lan√ßamentos</h2>
  <div class="novidade">Lan√ßamento de Novos E-books - 15/04</div>
  <div class="novidade">Curso de Introdu√ß√£o √† Programa√ß√£o - 20/04</div>
  <div class="novidade">Semana do Livro Infantil - 25/04</div>
</section>

  <section class="caixas-acao">
    <div class="card-acao">
      <h2>Comece agora sua jornada liter√°ria</h2>
      <p>√â gratuito, r√°pido e voc√™ acessa tudo de qualquer lugar!</p>
      <button onclick="location.href='login.html'">Entrar / Cadastrar</button>
    </div>
    <div class="card-acao">
      <h2>Pronto para come√ßar sua leitura?</h2>
      <p>Crie sua conta agora mesmo e aproveite todos os benef√≠cios da SmartLib.</p>
      <button onclick="location.href='login.html'">Criar Conta Gr√°tis</button>
    </div>
  </section>

  <!-- Rodap√© -->
  <footer>
    <div class="links-rapidos">
      <a href="#">Cat√°logo</a> |
      <a href="#">Servi√ßos</a> |
      <a href="#">Eventos</a> |
      <a href="#">Contato</a>
    </div>
    <div class="contato">
      <p>üìç Rua do Conhecimento, 123 - Cidade Saber</p>
      <p>üìû (00) 1234-5678 | üìß contato@biblioteca.com</p>
    </div>
    <div class="newsletter">
      <input type="email" placeholder="Receba nossas novidades por e-mail" />
      <button>Inscrever-se</button>
    </div>
  </footer>

  <script src="script.js"></script>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    const user = JSON.parse(localStorage.getItem("smartlib_usuario"));

    const linkFuncionario = document.querySelector('a[href="funcionario.html"]');
    const linkCadastroLivros = document.querySelector('a[href="cadastro-livros.html"]');

    const containerMensagem = document.createElement('div');
    containerMensagem.classList.add('mensagem-bloqueio');
    containerMensagem.innerHTML = `
  <section class="mensagem-permissao">
    <h2>üîí Acesso restrito</h2>
    <p>Voc√™ n√£o tem permiss√£o para acessar essa √°rea da SmartLib. Apenas funcion√°rios podem acessar esta se√ß√£o.</p>
    <div class="botoes-permissao">
    <button onclick="location.reload()">‚¨ÖÔ∏è Voltar</button>
    <button onclick="window.location.href='login.html'">
      üîÅ Voltar para a Tela de Login
    </button>
  </div>
`;

    if (user && user.tipo === "cliente") {
      if (linkFuncionario) {
        linkFuncionario.addEventListener('click', e => {
          e.preventDefault();
          const main = document.querySelector("main") || document.body;
          main.innerHTML = '';
          main.appendChild(containerMensagem);
        });
      }

      if (linkCadastroLivros) {
        linkCadastroLivros.addEventListener('click', e => {
          e.preventDefault();
          const main = document.querySelector("main") || document.body;
          main.innerHTML = '';
          main.appendChild(containerMensagem);
        });
      }
    }
  });


</script>
<script>
  document.addEventListener("DOMContentLoaded", () => {
    const usuario = JSON.parse(localStorage.getItem("smartlib_usuario"));
    const userInfo = document.getElementById("user-info");

    if (usuario && userInfo) {
      const fotoSalva = localStorage.getItem("smartlib_fotoPerfil");

      userInfo.innerHTML = `
        <img src="${fotoSalva || "https://i.pravatar.cc/150?u=" + usuario.usuario}" alt="Foto do usu√°rio" id="foto-perfil" />
        <span>${usuario.tipo.charAt(0).toUpperCase() + usuario.tipo.slice(1)}</span>
        <div class="menu-dropdown" id="menu-dropdown">
          <button onclick="logout()">üö™ Sair</button>
          <label style="font-size: 0.9em; color: gray;">üì∑ Mudar Foto
            <input type="file" id="input-foto-perfil" accept="image/*" style="display: none;">
          </label>
        </div>
      `;

      // Toggle do menu
      userInfo.addEventListener("click", () => {
        const menu = document.getElementById("menu-dropdown");
        menu.style.display = menu.style.display === "flex" ? "none" : "flex";
      });

      // Upload de nova imagem
      document.getElementById("input-foto-perfil").addEventListener("change", e => {
        const file = e.target.files[0];
        if (!file) return;
        const reader = new FileReader();
        reader.onload = function (event) {
          const url = event.target.result;
          localStorage.setItem("smartlib_fotoPerfil", url);
          document.getElementById("foto-perfil").src = url;
        };
        reader.readAsDataURL(file);
      });
    }
  });

  function logout() {
    localStorage.removeItem("smartlib_usuario");
    window.location.href = "login.html";
  }
</script>

</body>
</html>
